{"version":3,"file":"map-tool-boundingbox.js","sources":["../../../../src/components/tools/map-tool-boundingbox.js"],"sourcesContent":["import { html, css } from 'lit-element';\r\nimport { MapToolBase } from \"./map-tool-base.js\";\r\nimport { MapToolBoundingboxHandlerFactory } from '../../factories/map-tool-boudingbox-handler-factory.js';\r\n\r\n/**\r\n  * @prop {String} for - The selector for the map to listen to\r\n  * @attr lat - The latitude of the mouse position, set by the map\r\n  * @attr lng - The longitude of the mouse position, set by the map\r\n*/\r\nexport class MapToolBoundingBox extends MapToolBase {\r\n  static styles = [\r\n      css`\r\n      .scale-down {\r\n        font-size: 80%;\r\n      }`\r\n  ]\r\n\r\n  static get properties() {\r\n    return {\r\n      ...MapToolBase.properties,\r\n      east: { type: Number, reflect: true},\r\n      west: { type: Number, reflect: true},\r\n      north: { type: Number, reflect: true},\r\n      south: { type: Number, reflect: true}\r\n    }\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this.lat = this.lng = null;\r\n    this.markers = [];\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();    \r\n    if (this.webMapElement && !this.disabled) {\r\n      this.activate();\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.webMapElement && !this.disabled) {\r\n      this.deactivate();\r\n    }\r\n    super.disconnectedCallback();\r\n  }\r\n\r\n  render() {\r\n    if (this.disabled) {\r\n      return html``;\r\n    }\r\n    if (!this.webMapElement) {\r\n      return html`<div>${this.constructor.name}: No map element found</div>`;\r\n    }\r\n    return html`Boundingbox<br>\r\n      <button @click=\"${()=>this.resetBbox()}\">Reset to current map extent</button><br>\r\n      west: ${this.west}, south: ${this.south}, east: ${this.east}, north:  ${this.north}`\r\n  }\r\n\r\n  activate() {\r\n    if (!this.isActivated) {\r\n      super.activate();\r\n      this.east = this.west = this.north = this.south = null;\r\n      this.webMapElement.addEventListener('map-update-boundingbox', this._boundUpdateBoundingBox);\r\n      this.bboxHandler = MapToolBoundingboxHandlerFactory.getHandler(this.webMapElement);\r\n      this.bboxHandler.createBoundingBox({west: this.west, south: this.south, east: this.east, north: this.north});\r\n      this.isActivated = true;\r\n    }\r\n  }\r\n  resetBbox() {\r\n    this.bboxHandler.deleteBoundingBox();\r\n    this.bboxHandler.createBoundingBox();\r\n  }\r\n  deactivate() {\r\n    if (this.isActivated) {\r\n      super.deactivate();\r\n      this.webMapElement.removeEventListener('map-update-boundingbox', this._boundUpdateBoundingBox);\r\n      this.bboxHandler.deleteBoundingBox();\r\n      this.east = this.west = this.north = this.south = null;\r\n      this.isActivated = false;\r\n    }\r\n  }\r\n\r\n  updateBoundingBox(e) {\r\n    let factor = this.prevFactor === undefined ? 7 : this.prevFactor;\r\n    if (this.prevResolution !== this.webMapElement.resolution) {\r\n      this.prevResolution = this.webMapElement.resolution;\r\n      this.prevFactor = factor = -Math.round(Math.log10(this.webMapElement.resolution));\r\n    }\r\n    this.east = parseFloat(e.detail.east.toFixed(factor));\r\n    this.west = parseFloat(e.detail.west.toFixed(factor));\r\n    this.north = parseFloat(e.detail.north.toFixed(factor));\r\n    this.south = parseFloat(e.detail.south.toFixed(factor));\r\n  }\r\n  _boundUpdateBoundingBox = (e) => this.updateBoundingBox(e)\r\n}\r\n\r\ncustomElements.define('map-tool-boundingbox', MapToolBoundingBox);"],"names":["css","html"],"mappings":"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"}