{"version":3,"file":"map-tool-coordinates.js","sources":["../../../../src/components/tools/map-tool-coordinates.js"],"sourcesContent":["import { html, css } from 'lit-element';\r\nimport { MapToolBase } from \"./map-tool-base\";\r\n\r\n/**\r\n  * @prop {String} for - The selector for the map to listen to\r\n  * @attr lat - The latitude of the mouse position, set by the map\r\n  * @attr lng - The longitude of the mouse position, set by the map\r\n*/\r\nexport class MapToolCoordinates extends MapToolBase {\r\n  #isActivated = false;\r\n  static styles = [\r\n      css`\r\n      .scale-down {\r\n        font-size: 80%;\r\n      }`\r\n  ]\r\n\r\n  static get properties() {\r\n    return {\r\n      ...MapToolBase.properties,\r\n      lat: { type: Number, reflect: true},\r\n      lng: { type: Number, reflect: true}\r\n    }\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n    this.lat = this.lng = null;\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    if (!this.disabled) {\r\n      this.activate(); \r\n    } else {\r\n      this.deactivate();\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.deactivate();\r\n    super.disconnectedCallback();\r\n  }\r\n\r\n  render() {\r\n    if (this.disabled) {\r\n      return html``;\r\n    }\r\n    if (!this.webMapElement) {\r\n      return html`<div>${this.constructor.name}: No map element found</div>`;\r\n    }\r\n    if (this.lat === null) {\r\n      return html`<div>Move the mouse over the map</div>`;\r\n    }\r\n    let factor = 7;\r\n    if (this.webMapElement.resolution) {\r\n      factor = -Math.round(Math.log10(this.webMapElement.resolution));\r\n    }\r\n    return html`<div class=\"scale-down\">Latitude: ${this.lat?.toFixed(factor)}, Longitude: ${this.lng?.toFixed(factor)}</div>`;\r\n  }\r\n\r\n  _mouseMovedOnMap(e) {\r\n    if (this.disabled) return;\r\n    this.lat = e.detail.lat;\r\n    this.lng = e.detail.lng;\r\n  }\r\n  activate() {\r\n    if (!this.#isActivated) {\r\n      this.#isActivated = true;\r\n      super.activate();\r\n      if (this.webMapElement) {\r\n        this.webMapElement.addEventListener('map-mousemove', this._boundMouseMovedOnMap);\r\n      }\r\n    }\r\n  }\r\n  deactivate() {\r\n    if (this.#isActivated) {\r\n      this.#isActivated = false;\r\n      super.deactivate();\r\n      if (this.webMapElement) {\r\n        this.webMapElement.removeEventListener('map-mousemove', this._boundMouseMovedOnMap);\r\n      }\r\n    }\r\n  }\r\n  _boundMouseMovedOnMap = (e) => this._mouseMovedOnMap(e);\r\n}\r\n\r\ncustomElements.define('map-tool-coordinates', MapToolCoordinates);"],"names":["css","html"],"mappings":";;;;;;AAGA;AACA;AACA;AACA;AACA;AACO,MAAM,kBAAkB,SAAS,WAAW,CAAC;AACpD,EAAE,YAAY,GAAG,KAAK,CAAC;AACvB,EAAE,OAAO,MAAM,GAAG;AAClB,MAAMA,CAAG,CAAC;AACV;AACA;AACA,OAAO,CAAC;AACR,GAAG;AACH;AACA,EAAE,WAAW,UAAU,GAAG;AAC1B,IAAI,OAAO;AACX,MAAM,GAAG,WAAW,CAAC,UAAU;AAC/B,MAAM,GAAG,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC;AACzC,MAAM,GAAG,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC;AACzC,KAAK;AACL,GAAG;AACH;AACA,EAAE,WAAW,GAAG;AAChB,IAAI,KAAK,EAAE,CAAC;AACZ,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;AAC/B,GAAG;AACH;AACA,EAAE,iBAAiB,GAAG;AACtB,IAAI,KAAK,CAAC,iBAAiB,EAAE,CAAC;AAC9B,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACxB,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC;AACtB,KAAK,MAAM;AACX,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;AACxB,KAAK;AACL,GAAG;AACH;AACA,EAAE,oBAAoB,GAAG;AACzB,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;AACtB,IAAI,KAAK,CAAC,oBAAoB,EAAE,CAAC;AACjC,GAAG;AACH;AACA,EAAE,MAAM,GAAG;AACX,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;AACvB,MAAM,OAAOC,CAAI,CAAC,CAAC,CAAC;AACpB,KAAK;AACL,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;AAC7B,MAAM,OAAOA,CAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;AAC7E,KAAK;AACL,IAAI,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,EAAE;AAC3B,MAAM,OAAOA,CAAI,CAAC,sCAAsC,CAAC,CAAC;AAC1D,KAAK;AACL,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC;AACnB,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE;AACvC,MAAM,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC;AACtE,KAAK;AACL,IAAI,OAAOA,CAAI,CAAC,kCAAkC,EAAE,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC;AAC/H,GAAG;AACH;AACA,EAAE,gBAAgB,CAAC,CAAC,EAAE;AACtB,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,OAAO;AAC9B,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;AAC5B,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC;AAC5B,GAAG;AACH,EAAE,QAAQ,GAAG;AACb,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AAC5B,MAAM,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AAC/B,MAAM,KAAK,CAAC,QAAQ,EAAE,CAAC;AACvB,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AACzF,OAAO;AACP,KAAK;AACL,GAAG;AACH,EAAE,UAAU,GAAG;AACf,IAAI,IAAI,IAAI,CAAC,YAAY,EAAE;AAC3B,MAAM,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAChC,MAAM,KAAK,CAAC,UAAU,EAAE,CAAC;AACzB,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,eAAe,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;AAC5F,OAAO;AACP,KAAK;AACL,GAAG;AACH,EAAE,qBAAqB,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;AAC1D,CAAC;AACD;AACA,cAAc,CAAC,MAAM,CAAC,sBAAsB,EAAE,kBAAkB,CAAC;;;;"}