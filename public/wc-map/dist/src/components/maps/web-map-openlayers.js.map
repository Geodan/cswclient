{"version":3,"file":"web-map-openlayers.js","sources":["../../../../src/components/maps/web-map-openlayers.js"],"sourcesContent":["import { html } from 'lit';\r\nimport OLMap from 'ol/Map.js';\r\nimport { Vector as VectorLayer } from 'ol/layer.js';\r\nimport { Vector as VectorSource} from 'ol/source.js';\r\nimport GeoJSON from 'ol/format/GeoJSON.js';\r\nimport View from 'ol/View.js';\r\nimport {fromLonLat} from 'ol/proj.js';\r\n\r\nimport { WebMap } from './web-map.js';\r\nimport { fetchText } from '../../utils/fetchdata.js';\r\n\r\nexport class WebMapOpenLayers extends WebMap {\r\n\r\n  render() {\r\n    return html`\r\n      <style>\r\n        ${WebMapOpenLayers.externalStyles}\r\n      </style>\r\n      <div id=\"map\"></div>\r\n    `;\r\n  }\r\n\r\n  static externalStyles = '';\r\n\r\n  async connectedCallback() {\r\n    super.connectedCallback();\r\n    this.status = 'web-map-openlayers connected to the DOM'\r\n    try {\r\n      // Fetch and apply the external CSS\r\n      if (!WebMapOpenLayers.externalStyles) {\r\n        this.status = 'web-map-openlayers fetching external CSS'\r\n        WebMapOpenLayers.externalStyles = await fetchText('https://cdn.jsdelivr.net/npm/ol@v8.2.0/ol.css');          \r\n        this.status = 'web-map-openlayers external CSS fetched'\r\n        this.requestUpdate();\r\n      }  \r\n      // Add the map\r\n      const worldSource = new VectorSource({\r\n        url: './data/world.geo.json',\r\n        format: new GeoJSON(),\r\n        attributions: '<a href=\"https://www.naturalearthdata.com/\">Natural Earth</a>'\r\n      })\r\n      const worldLayer = new VectorLayer({\r\n        source: worldSource\r\n      });\r\n\r\n      const lonLat = [5.1, 52.3522];\r\n      const webMercator = fromLonLat(lonLat);\r\n      const map = new OLMap({\r\n        target: this.shadowRoot.querySelector('#map'),\r\n        layers: [worldLayer],\r\n        view: new View({\r\n          center: webMercator,\r\n          zoom: 5\r\n        })\r\n      });\r\n      map.once('rendercomplete', () => {\r\n        this.status = 'web-map-openlayers ready';\r\n        this.dispatchEvent(new CustomEvent('map-ready'));\r\n        console.log('web-map-openlayers map-ready event dispatched');\r\n      });\r\n    } catch (error) {\r\n      console.error('web-map-openlayers error:', error.message);\r\n      this.status = error.message;\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define('web-map-openlayers', WebMapOpenLayers);"],"names":["html","OLMap"],"mappings":";;;;;;;;;;;;AAWO,MAAM,gBAAgB,SAAS,MAAM,CAAC;AAC7C;AACA,EAAE,MAAM,GAAG;AACX,IAAI,OAAOA,CAAI,CAAC;AAChB;AACA,QAAQ,EAAE,gBAAgB,CAAC,cAAc,CAAC;AAC1C;AACA;AACA,IAAI,CAAC,CAAC;AACN,GAAG;AACH;AACA,EAAE,OAAO,cAAc,GAAG,EAAE,CAAC;AAC7B;AACA,EAAE,MAAM,iBAAiB,GAAG;AAC5B,IAAI,KAAK,CAAC,iBAAiB,EAAE,CAAC;AAC9B,IAAI,IAAI,CAAC,MAAM,GAAG,0CAAyC;AAC3D,IAAI,IAAI;AACR;AACA,MAAM,IAAI,CAAC,gBAAgB,CAAC,cAAc,EAAE;AAC5C,QAAQ,IAAI,CAAC,MAAM,GAAG,2CAA0C;AAChE,QAAQ,gBAAgB,CAAC,cAAc,GAAG,MAAM,SAAS,CAAC,+CAA+C,CAAC,CAAC;AAC3G,QAAQ,IAAI,CAAC,MAAM,GAAG,0CAAyC;AAC/D,QAAQ,IAAI,CAAC,aAAa,EAAE,CAAC;AAC7B,OAAO;AACP;AACA,MAAM,MAAM,WAAW,GAAG,IAAI,YAAY,CAAC;AAC3C,QAAQ,GAAG,EAAE,uBAAuB;AACpC,QAAQ,MAAM,EAAE,IAAI,OAAO,EAAE;AAC7B,QAAQ,YAAY,EAAE,+DAA+D;AACrF,OAAO,EAAC;AACR,MAAM,MAAM,UAAU,GAAG,IAAI,WAAW,CAAC;AACzC,QAAQ,MAAM,EAAE,WAAW;AAC3B,OAAO,CAAC,CAAC;AACT;AACA,MAAM,MAAM,MAAM,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AACpC,MAAM,MAAM,WAAW,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;AAC7C,MAAM,MAAM,GAAG,GAAG,IAAIC,GAAK,CAAC;AAC5B,QAAQ,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC;AACrD,QAAQ,MAAM,EAAE,CAAC,UAAU,CAAC;AAC5B,QAAQ,IAAI,EAAE,IAAI,IAAI,CAAC;AACvB,UAAU,MAAM,EAAE,WAAW;AAC7B,UAAU,IAAI,EAAE,CAAC;AACjB,SAAS,CAAC;AACV,OAAO,CAAC,CAAC;AACT,MAAM,GAAG,CAAC,IAAI,CAAC,gBAAgB,EAAE,MAAM;AACvC,QAAQ,IAAI,CAAC,MAAM,GAAG,0BAA0B,CAAC;AACjD,QAAQ,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC;AACzD,QAAQ,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAC;AACrE,OAAO,CAAC,CAAC;AACT,KAAK,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,KAAK,CAAC,2BAA2B,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;AAChE,MAAM,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC;AAClC,KAAK;AACL,GAAG;AACH,CAAC;AACD;AACA,cAAc,CAAC,MAAM,CAAC,oBAAoB,EAAE,gBAAgB,CAAC;;;;"}